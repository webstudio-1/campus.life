"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[68357],{900095:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(667294),i=n(545007),o=n(20256),a=n(868977),s=n(265332),m=n(228028),d=n(19963),l=n(18644),c=n(231333),u=n(297934),_=n(233846),g=n(693806),p=n(339908),f=n(644849),h=n(460632),y=n(617100),x=n(785893);let C=(0,r.memo)(function({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:n,disablePhotoCommentSelection:C,inCommentsImprovedDropdownExp:S,isEligibleForPinReactions:A,isPDP:E,orbacSubjectId:I,pinId:Z,privatePin:j,reactionByMe:P,reactionCounts:w,setIsLoadingNewlyCreatedComment:N,showCommentComposer:b,showReactBackground:v,storyPinDataId:T,viewParameter:k}){let D,J=(0,_.ZP)(),M=(0,u.Z)(),O=(0,i.I0)(),{logContextEvent:z}=(0,d.u)(),B=(0,a.Z)(),{showOneToast:L}=(0,p.dI)(),{closeupWithinMasonryEnabled:R,peekCloseupEnabled:W,clientTrackingParams:U}=(0,h.x4)(),[F,G]=(0,r.useState)(!1),[H,K]=(0,r.useState)(s.A9.NONE);D=E?R?2:8:+!!R;let q=8*!!E;async function Q(n){let{commentMedia:r,contentMarkdown:i,force:o,imageSignatures:a,tags:m}=n;if(null===e)return!1;N(!0);try{if(e){if(a.length){let t={aggregatedPinDataId:e,details:i,image_signatures:a,pin_id:Z??"",username:M.isAuth?M.username:"",fromUnifiedComment:!0};await O((0,y.DD)(t))}else await B({commentMedia:r,force:o,fromUnifiedComment:!0,objectType:f.o.pin,objectId:e,pinId:Z,tags:m,text:i,orbacSubjectId:I});z({event_type:7,clientTrackingParams:U,object_id_str:Z,aux_data:{num_user_mention_tags:(m?JSON.parse(m):[]).length,...T?{creator_id:t,story_pin_data_id:T}:{}}})}}catch(e){return[g.ky,g.LJ].includes((0,l.Z)(e,"api_error_code")??0)?K((0,l.Z)(e,"api_error_code")===g.ky?s.A9.WARNING:s.A9.BLOCK):L(({hideToast:t})=>(0,x.jsx)(c.Z,{onHide:t,text:(0,l.Z)(e,"message_detail")||(0,l.Z)(e,"message")||J._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),N(!1),!1}return G(!1),N(!1),!0}let{marginEnd:V,marginStart:X}=W?{marginEnd:4,marginStart:4}:R?{marginEnd:0,marginStart:0}:{marginEnd:D,marginStart:q};return(0,x.jsx)(o.xu,{marginEnd:V,marginStart:X,children:(0,x.jsx)(m.Z,{clientTrackingParams:U,commentCount:n,commentWarningModalState:H,disablePhotoCommentSelection:C,dismissCommentWarningModal:()=>K(s.A9.NONE),iconSize:E?20:void 0,inCommentsImprovedDropdownExp:S,isEligibleForPinReactions:A,isLeftAligned:E,objectType:f.o.pin,onAddItem:Q,onCancelItem:()=>G(!1),onEnter:()=>G(!0),pinId:Z,privatePin:j,reactionByMe:P,reactionCounts:w,showCommentComposer:b,showReactBackground:!E&&v,statusType:F?"textInflightCreation":"textStaticDisplay",viewParameter:k})})});function S(e){return(0,x.jsx)(C,{...e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-f980731851764ed4.mjs.map