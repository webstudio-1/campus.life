"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[78602],{363656:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCommentButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"CommentsPopover_pin"}],type:"Pin",abstractKey:null};o.hash="8dc3a5628143d3300bdbe623692a5f1b";let i=o},466107:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var o,i=n(667294);n(422578);var l=n(20256),s=n(19963),r=n(78039),a=n(41086),d=n(233846),m=n(112800),c=n(460632),p=n(12624),u=n(757653),v=n(785893);let h=(0,u.Z)(()=>n.e(12167).then(n.bind(n,188654)),void 0,e=>188654,"CommentsPopover"),_=void 0!==o?o:o=n(363656);function w({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,isEligibleForAggregatedComments:n,pinKey:o,shouldShowCommentCount:u,totalCommentCount:w,viewParameter:f,viewType:x}){let b=(0,d.ZP)(),g=(0,p.t)(),C=(0,r.Z)(_,o),{isCommentThreadExpanded:j,setIsCommentThreadExpanded:y}=(0,c.x4)(),{logContextEvent:P}=(0,s.u)(),I=(0,i.useRef)(null),T=t&&j,E=b._('Comments', 'Closeup.Comment.Icon', 'Icon for scrolling comments into view'),k=t=>{P({component:13464,element:2,event_type:10554,view_parameter:f,view_type:x}),(0,m.tj)("dweb.closeup_comment_button.community_view_intent",{tags:{experimentGroup:e?"improved_dropdown":"popover",clickSource:t}})},Z=n=>{if(t)j?y?.(!1):(y?.(!0),k(n));else{let t=document.getElementById("canonical-card");if(t){let o=t.getBoundingClientRect().top+window.scrollY-g;if(e){let e=null,t=()=>{e&&clearTimeout(e),e=setTimeout(()=>{y?.(!0),k(n),window.removeEventListener("scroll",t)},100)};window.addEventListener("scroll",t,{passive:!0}),t()}window.scrollTo({top:o,behavior:"smooth"})}}};return(0,v.jsxs)(l.xu,{children:[T&&(0,v.jsx)(h,{anchorRef:I,pinKey:C,setIsOpen:y,viewParameter:f}),(0,v.jsxs)(l.kC,{alignItems:"center",direction:"row",children:[(0,v.jsx)(l.hU,{ref:I,accessibilityLabel:E,disabled:!n,icon:"speech-outline",onClick:()=>Z("icon"),selected:T,size:"lg",tooltip:{text:E}}),u&&(0,v.jsx)(l.iP,{disabled:!n,onTap:()=>Z("count"),children:(0,v.jsx)(l.xv,{weight:"bold",children:(0,v.jsx)(a.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:w})})})]})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupCommentButton-8181681695f14d55.mjs.map