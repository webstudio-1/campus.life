"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[78352],{978352:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var o=i(667294),n=i(545007),a=i(20256),r=i(578373),l=i(785893);let s="cubic-bezier(0, 0, 0.58, 1)",c={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:s,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:s,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function d({reactionLabel:e,handleHideConfirmation:t}){let[i,n]=(0,o.useState)("loaded"),r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e,i;return r.current=requestAnimationFrame(()=>{e=setTimeout(()=>n("fade"),1e3),i=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(i)}},[]),(0,l.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",children:(0,l.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{...c[i],whiteSpace:"nowrap"}},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,position:"absolute",rounding:"pill",zIndex:new a.Ry(2),children:(0,l.jsx)(a.xv,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:e})})})}var h=i(233846),u=i(970601),p=i(76239),m=i(460632);let y={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},g={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function f({reactionButtonRect:e,handleReactionTrayClick:t,shouldShowReactionTrayUp:i}){let n=(0,h.ZP)(),r=(0,o.useRef)(null),[s,c]=(0,o.useState)("loading"),[d,f]=(0,o.useState)(""),[_,x]=(0,o.useState)(),{closeupWithinMasonryEnabled:b}=(0,m.x4)(),[v,S]=(0,o.useState)(!1),[w,T]=(0,o.useState)(!1),[k,j]=(0,o.useState)({}),[R]=(0,o.useState)(e),[A,C]=(0,o.useState)(-150),P=(0,o.useRef)(void 0),I=(0,o.useRef)({}),z=r.current?.getBoundingClientRect();(0,o.useEffect)(()=>{z?.right&&z?.right>(window.innerWidth||document.documentElement?.clientWidth)&&(-276!==A?T(!0):T(!1),C(-276))},[z?.right,A,b]),(0,o.useEffect)(()=>{"loading"===s&&(P.current=requestAnimationFrame(()=>c("loaded"))),S(!0);let e={...k};p.Jg.forEach(t=>{I.current[t]&&(!e[t]||w)&&(e[t]=I.current[t].getBoundingClientRect())}),Object.keys(e).length===p.Jg.length&&j(e),!_&&v&&(()=>{let e={..._};p.Jg.forEach(t=>{let i=k[t],{left:o,top:n}=R,{left:a,top:r}=i;e[t]={translateX:o-a+-8,translateY:n-r+9}}),x(e)})()},[v,A,e]);let E=()=>{"clicked"===s&&d&&(c("flying"),setTimeout(()=>{t(d)},750))},B=p.Jg.map((e,t)=>{let{staticAsset:i,animatedAsset:o,label:r,htmlStyle:c,animationStyle:h}=(0,p.fW)(e,n),m={loadedStyle:{transitionDelay:`${.08*t}s`,...y[s]},clickedStyle:{...d===e?y.clicked:y.loaded},flyingStyle:{..._&&d===e?{transform:`translateZ(0) translateX(${_[e].translateX}px) translateY(${_[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...y[s]}:y.fading}},g={};return"loading"===s||"loaded"===s?g={...m.loadedStyle}:"clicked"===s?g={...m.clickedStyle}:"flying"===s&&(g={...m.flyingStyle}),(0,l.jsx)(a.xu,{alignSelf:"center",display:"flex",justifyContent:"between",children:(0,l.jsxs)(a.xu,{ref:t=>{I.current[e]=t},alignItems:"center",dangerouslySetInlineStyle:{__style:{...g}},display:"flex",justifyContent:"center",maxHeight:40,maxWidth:40,overflow:"visible",position:"relative",children:[d!==e&&(0,l.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},height:40,width:40})}),(0,l.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",position:"relative",children:[(0,l.jsx)(u.Z,{unsafeCSS:c}),d===e&&"clicked"===s&&(0,l.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:y.label},display:"flex",height:20,justifyContent:"center",paddingX:2,paddingY:1,rounding:"pill",children:(0,l.jsx)(a.xv,{color:"inverse",overflow:"normal",size:"100",weight:"bold",children:r})}),(0,l.jsx)("div",{onClick:E,onKeyDown:E,role:"presentation",children:(0,l.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...y.icon,...d===e&&"clicked"===s?{animation:h}:{},backgroundImage:`url(${o})`}},display:"flex",height:40,justifyContent:"center",width:40})})]})]})},t)});return(0,l.jsx)(a.xu,{ref:r,alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:b?void 0:A,marginTop:!b&&i?-(80+R.height):0}},display:"flex",justifyContent:"center",position:b?void 0:"absolute",children:(0,l.jsx)(a.xu,{alignItems:"center",color:"flying"===s?"transparent":"default",dangerouslySetInlineStyle:{__style:{...!b&&"flying"!==s?g:{}}},display:"flex",height:80,justifyContent:"center",onMouseMove:e=>{let{clientX:t}=e;if(r.current){let e=b?t-r.current.getBoundingClientRect().left:t;if("flying"!==s){let t,i=(v&&p.Jg.forEach(i=>{let o=k[i];if(o&&o.left&&o.right){let{left:n,right:a}=o;e>=n&&e<=a&&(t=i)}}),t||null);i!==d&&f(i),c("clicked")}}},rounding:"pill",width:300,children:(0,l.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"around",paddingX:5,width:"100%",children:B})})})}var _=i(19963),x=i(135376),b=i(119343),v=i(297934),S=i(967312),w=i(827491),T=i(488879),k=i(437318),j=i(913105);function R(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function A({children:e,showTooltip:t,tooltipText:i}){return t?(0,l.jsx)(a.u,{inline:!0,text:i,zIndex:new a.Ry(2),children:e}):e}class C extends o.PureComponent{constructor(...e){super(...e),R(this,"state",{isConfirmationShowing:!1,isHoveringOverTray:!1,isReactionTrayShowing:!1,reactionButtonRect:null,active:!1}),R(this,"reactionButtonRef",(0,o.createRef)()),R(this,"tooltipExperience",{}),R(this,"trayOpenTimer",null),R(this,"trayCloseTimer",null),R(this,"isHoveringOverButton",!1),R(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),R(this,"handleReactForAuthViewer",(e=7)=>{let{clientTrackingParams:t,pinId:i,pinUpdateReactionCount:o,reactionByMe:n}=this.props,a={pin_id:i,reaction_type:e,client_tracking_params:t,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};n&&o(i,!1,n),o(i,!0,e),r.Z.create("ReactionsResource",a).callUpdate()}),R(this,"handleUnreactForAuthViewer",()=>{let{clientTrackingParams:e,pinId:t}=this.props,i={pin_id:t,client_tracking_params:e,...this.props.orbacSubjectId?{orbac_subject_id:this.props.orbacSubjectId}:Object.freeze({})};r.Z.create("ReactionsResource",i).callDelete()}),R(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef?.current&&this.reactionButtonRef.current instanceof HTMLElement){let e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),R(this,"openTrayWithDelay",()=>{let{handleReactionTrayHover:e}=this.props;setTimeout(()=>{this.isHoveringOverButton&&(this.setState({isReactionTrayShowing:!0}),e&&e(!0),this.tooltipExperience&&this.tooltipExperience.complete&&this.tooltipExperience.complete())},1e3)}),R(this,"closeTray",()=>{let{handleReactionTrayHover:e}=this.props;this.setState({isReactionTrayShowing:!1}),e&&e(!1)}),R(this,"startTrayCloseTimer",()=>{this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{let{isHoveringOverTray:e}=this.state;e||this.isHoveringOverButton||this.closeTray()},300)}),R(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),R(this,"handleExitTrayWithDelay",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),R(this,"handleClickButton",()=>{let{clientTrackingParams:e,requireAuth:t,component:i,pinId:o,pinUpdateReactionCount:n,reactionByMe:a,viewParameter:r,viewType:l,logContextEvent:s}=this.props;a?(n(o,!1,a),t?t():this.handleUnreactForAuthViewer()):this.setReaction("love"),this.closeTray(),s({event_type:101,view_type:l||3,view_parameter:r||139,...i?{component:i}:Object.freeze({}),element:11354,object_id_str:o,clientTrackingParams:e})}),R(this,"setReaction",e=>{let{requireAuth:t,i18n:i}=this.props;t?t():this.handleReactForAuthViewer((0,p.fW)(e,i).type),this.handleShowConfirmation()}),R(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),R(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){this.trayOpenTimer&&clearTimeout(this.trayOpenTimer),this.trayCloseTimer&&clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){let{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:i}=this.state,{iconColor:o="darkGray",idealDirection:n,reactionByMe:r,shouldShowReactionTrayUp:s=!1,showBackground:c,showTooltip:h,reactionButtonSize:u,reactionIconSize:m,closeupWithinMasonryEnabled:y}=this.props,g=this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled,_=r&&p.GY[r]?p.GY[r]:"default",{staticAsset:x,label:v}=(0,p.fW)(_,this.props.i18n,o),S=e&&!!t&&!!t.left&&!!t.top&&(0,l.jsx)(f,{handleReactionTrayClick:this.setReaction,reactionButtonRect:t,shouldShowReactionTrayUp:s}),w=this.props.i18n._('React', 'Closeup.ReactionPicker.Icon', 'Icon for reacting to current pin');return(0,l.jsxs)(a.xu,{position:"relative",children:[g?(0,l.jsx)(a.hU,{accessibilityLabel:w,dataTestId:"react-button",icon:r?"heart":"heart-outline",iconColor:r?"red":void 0,onClick:this.handleClickButton,tooltip:{text:w}}):(0,l.jsx)(A,{showTooltip:!i||!this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled,tooltipText:w,children:(0,l.jsx)(a.iP,{ref:this.reactionButtonRef,accessibilityLabel:"reaction",dataTestId:"react-button",onBlur:()=>{this.setState({active:!1})},onMouseEnter:()=>{this.isHoveringOverButton=!0,this.setState({active:!0}),this.props.checkExperiment("ce_dweb_pin_reaction_simplification").anyEnabled||this.openTrayWithDelay()},onMouseLeave:()=>{this.isHoveringOverButton=!1,this.setState({active:!1}),this.startTrayCloseTimer()},onTap:this.handleClickButton,rounding:"circle",children:(0,l.jsx)(a.xu,{color:c?"secondary":y?"transparent":"default",dangerouslySetInlineStyle:{__style:{...this.state.active?{backgroundColor:"#E9E9E9"}:{}}},rounding:"circle",children:(0,l.jsx)(a.kC,{alignItems:"center",justifyContent:"center",minHeight:u,minWidth:u,children:(0,l.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${x})`}},display:"flex",height:m,justifyContent:"center",width:m})})})})}),h&&!e&&!i&&(0,l.jsx)(b.mc,{anchor:this.reactionButtonRef?.current,experienceIds:[501977,501995],flyoutSize:"sm",idealDirection:"down",onExperienceMount:this.handleExperienceMount,placementId:12}),e&&!!t&&!!t.left&&!!t.top&&(0,l.jsx)(a.kC,{alignItems:"center",justifyContent:"center",children:(0,l.jsx)(a.Le,{top:0,children:(0,l.jsx)(a.iP,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleExitTrayWithDelay,onTap:this.handleExitTrayWithDelay,children:y?(0,l.jsx)(a.mh,{zIndex:new a.Ry(k.rv),children:(0,l.jsx)(a.J2,{__overflow:"visible",anchor:this.reactionButtonRef?.current,idealDirection:n,onDismiss:this.closeTray,positionRelativeToAnchor:!1,size:"xl",children:S})}):S})})}),!y&&i&&!!r&&v&&(0,l.jsx)(d,{handleHideConfirmation:this.handleHideConfirmation,reactionLabel:v})]})}}function P(e){let{logContextEvent:t}=(0,_.u)(),i=(0,h.ZP)(),o=(0,x.Z)(),a=(0,w.Z)(),r=(0,v.Z)(),s=(0,T.lJ)(r,a),c=(0,n.I0)(),{closeupWithinMasonryEnabled:d}=(0,m.x4)(),{checkExperiment:u}=(0,S.FJ)();return(0,l.jsx)(C,{...e,checkExperiment:u,closeupWithinMasonryEnabled:d,i18n:i,logContextEvent:t,orbacSubjectId:s,pinUpdateReactionCount:(e,t,i)=>c((0,j.fA)(e,t,i)),requireAuth:o})}R(C,"defaultProps",{reactionButtonSize:44,reactionIconSize:24})},69466:(e,t,i)=>{i.d(t,{Bx:()=>n,N4:()=>r,is:()=>l,lt:()=>o,oM:()=>a});let o=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),n=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),a=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),r=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.'),l=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},135376:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(69466),n=i(233846),a=i(316866);let r=()=>{let{loginForMore:e,viewer:t,limitedLoginModalSubheader:i}=(0,a.m)(),r=(0,n.ZP)();return"AUTH"===t.type?null:t=>{e?.setVisible(!0),i?.setText(t?.loginModalHeader||(0,o.lt)(r))}}},76239:(e,t,i)=>{i.d(t,{GY:()=>v,Jg:()=>b,fW:()=>S});var o=i(141594),n=i(42966),a=i(721366),r=i(252739),l=i(725170),s=i(921028),c=i(590755),d=i(861374),h=i(805525),u=i(736929),p=i(616097),m=i(486722),y=i(692984),g=i(808532),f=i(37260),_=i(308220),x=i(446649);let b=["goodIdea","love","thanks","wow","haha"],v={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},S=(e,t,i="darkGray")=>{let b={default:{staticAsset:"white"===i?p:u},goodIdea:{staticAsset:a,animatedAsset:o,gridAsset:n,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:s,animatedAsset:r,gridAsset:l,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:h,animatedAsset:c,gridAsset:d,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:g,animatedAsset:m,gridAsset:y,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:x,animatedAsset:f,gridAsset:_,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&b[e]?b[e]:b.default}},616097:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/78352-2c8632aa2bc1be6a.mjs.map